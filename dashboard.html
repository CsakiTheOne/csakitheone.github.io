<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Chromecast Dashboard</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Google Cast Web Receiver SDK -->
    <script src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>

    <div class="container-custom">

        <h3 style="display: inline-block; margin: 0;">Hali Csáki! <span class="time"></span></h3>
        <h5 style="display: inline-block; margin: 0 32px;" class="date"></h5>

        <div class="row">
            
            <div class="col s12 m10">
                <div class="card" style="background: #36393f;">
                    <div class="widgetbot-container">
                        <widgetbot
                            id="widgetbot"
                            server="931451560112844800"
                            channel="1020626853033164852"
                            width="calc(100% + 200px)"
                            height="calc(100% + 48px + 72px)"
                        ></widgetbot>
                        <script src="https://cdn.jsdelivr.net/npm/@widgetbot/html-embed"></script>
                    </div>
                </div>
            </div>

            <div class="col s12 m2">
                <div class="card" style="background: #202225;">
                    <iframe
                        src="https://discord.com/widget?id=931451560112844800&theme=dark"
                        width="100%" height="600px" allowtransparency="true" frameborder="0"
                        sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts">
                    </iframe>
                </div>
            </div>
            
        </div>


    </div>

    <script>
        // Casting
        cast.framework.CastReceiverContext.getInstance().start();

        // widgetbot
        setTimeout(() => {
            const widgetbot = document.getElementById("widgetbot");
            const hamburgerButton = widgetbot.firstChild.contentWindow.document.getElementsByClassName("hamburger")[0];
            if (hamburgerButton.getAttribute("open")) { hamburgerButton.click(); }
        }, 5000);

        // Dynamic content
        Array.prototype.slice.call(document.getElementsByClassName("date")).forEach(item => {
            const days = ["Hétfő", "Kedd", "Szerda", "Csütörtök", "Péntek", "Szombat", "Vasárnap"];
            const date = new Date();
            item.innerText = `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()}. ${days[date.getDay()]}`;
        });
        Array.prototype.slice.call(document.getElementsByClassName("time")).forEach(item => {
            const date = new Date();
            item.innerText = `${date.getHours()}:${date.getMinutes()}`;
        });
    </script>

</body>
</html>